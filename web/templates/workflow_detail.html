{{define "content"}}
<div class="workflow-header">
    <h1>{{.Name}}</h1>
    <div class="actions">
        <button class="btn" hx-post="/workflows/{{.Name}}/run" hx-swap="none">Run Now</button>
    </div>
</div>

<div class="trend-chart">
    {{.PassRateChart}}
</div>

<div class="executions-list">
    <h2>Execution History</h2>
    <table>
        <thead>
            <tr>
                <th>Execution</th>
                <th>Status</th>
                <th>Started</th>
                <th>Duration</th>
                <th>Branch</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="execution-list">
        {{range .Executions}}
            <tr>
                <td><a href="/executions/{{.ID}}">{{.Name}}</a></td>
                <td><span class="status status-{{.Status}}">{{.Status}}</span></td>
                <td>{{.StartTime.Format "2006-01-02 15:04"}}</td>
                <td>{{.Duration}}</td>
                <td>{{.Branch}}</td>
                <td>
                    <a href="/executions/{{.ID}}" class="btn-secondary">Details</a>
                    <a href="/executions/{{.ID}}/report" class="btn-primary" target="_blank">Report</a>
                </td>
            </tr>
        {{end}}
        </tbody>
    </table>

    {{if .NextPage}}
    <div hx-get="/workflows/{{.Name}}/history?page={{.NextPage}}"
         hx-trigger="intersect once"
         hx-swap="afterend">
        Loading more...
    </div>
    {{end}}
</div>
{{end}}
